<!DOCTYPE html>
<html lang="es" ng-app="AngujarJS">

<head>
    <meta charset="utf-8" />
    <title>Smart Lunch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap / Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
          crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
          integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
          crossorigin="anonymous" />

    <!-- Tus CSS -->
    <link rel="stylesheet" href="css/login.css" />
    <link rel="stylesheet" href="css/toast-fix.css" />

    <style>
        /* Layout base centrado */
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
        }

        .user_card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,.2);
            width: 100%;
            max-width: 400px;
            padding: 20px;
        }

        .brand_logo_container {
            text-align: center;
            margin-bottom: 20px;
        }

            .brand_logo_container .login-logo {
                font-size: 3rem;
                color: white !important;
            }

        /* Mensaje de error en el form */
        .error-msg {
            display: block;
            margin-bottom: .75rem;
            color: #dc3545;
            font-weight: 600;
        }

        /* Bot�n deshabilitado */
        .btn:disabled {
            opacity: .6 !important;
            cursor: not-allowed !important;
            background-color: #6c757d !important;
            border-color: #6c757d !important;
        }

            .btn:disabled:hover {
                background-color: #6c757d !important;
                border-color: #6c757d !important;
            }

        /* SweetAlert2 bot�n rojo para errores */
        .swal2-confirm {
            background-color: #dc3545 !important;
            border: none !important;
            border-color: transparent !important;
            color: #fff !important;
            cursor: pointer !important;
            outline: none !important;
            box-shadow: none !important;
        }

            .swal2-confirm:hover {
                background-color: #c82333 !important;
                border: none !important;
                border-color: transparent !important;
                cursor: pointer !important;
                outline: none !important;
                box-shadow: none !important;
            }

            .swal2-confirm:focus {
                background-color: #dc3545 !important;
                border: none !important;
                border-color: transparent !important;
                cursor: pointer !important;
                outline: none !important;
                box-shadow: none !important;
            }

            .swal2-confirm:active {
                background-color: #c82333 !important;
                border: none !important;
                border-color: transparent !important;
                cursor: pointer !important;
                outline: none !important;
                box-shadow: none !important;
            }

        /* Estilos para SweetAlert2 overlay - asegurar que aparezca encima */
        .swal2-container {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 99999 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background-color: rgba(0, 0, 0, 0.4) !important;
        }

        .swal2-popup {
            position: relative !important;
            z-index: 100000 !important;
            margin: 0 !important;
            max-width: 500px !important;
            width: 90% !important;
        }

        .swal2-backdrop {
            background-color: rgba(0, 0, 0, 0.4) !important;
        }

        /* Prevenir scroll del body cuando aparece el popup */
        body.swal2-shown {
            overflow: hidden !important;
            position: fixed !important;
            width: 100% !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
        }

        /* Prevenir que SweetAlert2 mueva la p�gina */
        .swal2-container {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 99999 !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Asegurar que el popup no cause scroll */
        .swal2-popup {
            position: relative !important;
            z-index: 100000 !important;
            margin: 0 !important;
            transform: none !important;
        }

        /* Cursor pointer para botones de SweetAlert2 - m�s espec�fico */
        .swal2-actions button,
        .swal2-actions .swal2-confirm,
        .swal2-actions .swal2-cancel,
        .swal2-popup .swal2-actions button,
        .swal2-popup .swal2-actions .swal2-confirm {
            cursor: pointer !important;
        }

        /* Forzar cursor pointer en todos los elementos del popup */
        .swal2-popup * {
            cursor: default !important;
        }

        .swal2-popup button,
        .swal2-popup .swal2-confirm,
        .swal2-popup .swal2-actions button {
            cursor: pointer !important;
        }

        /* Estilo global para asegurar cursor pointer */
        .swal2-confirm:hover {
            cursor: pointer !important;
        }

        /* Forzar cursor pointer con mayor especificidad */
        .swal2-container .swal2-popup .swal2-actions .swal2-confirm {
            cursor: pointer !important;
        }

        /* Clases personalizadas para SweetAlert2 */
        .swal2-container-custom {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 99999 !important;
            background-color: rgba(0, 0, 0, 0.4) !important;
        }

        .swal2-popup-custom {
            position: relative !important;
            z-index: 100000 !important;
            margin: 0 !important;
        }

        @media (max-width: 768px) {
            .user_card {
                width: 100%;
                height: 100%;
                border-radius: 0;
                box-shadow: 0 4px 8px rgba(0,0,0,.2);
                padding: 20px;
            }

            .d-flex.justify-content-center.h-100 {
                height: 100vh;
                align-items: center;
            }
        }
    </style>
</head>

<body ng-controller="Login">
    <div class="container">
        <div class="d-flex justify-content-center h-100">
            <div class="user_card">

                <div class="d-flex justify-content-center">
                    <div class="brand_logo_container">
                        <i class="login-logo fas fa-utensils"></i>
                        <h5 class="text-white mt-2" style="color: white !important;">Smart Lunch</h5>
                    </div>
                </div>

                <div class="d-flex justify-content-center form_container">
                    <!-- Importante: ng-submit para Enter y evitar reload -->
                    <form ng-submit="logIn($event)" novalidate>
                        <!-- mensaje de error en la UI -->
                        <span id="error-msg" class="error-msg" ng-show="showError">{{ errorMsg }}</span>

                        <div class="input-group mb-3">
                            <div class="input-group-append">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                            </div>
                            <input type="text"
                                   id="view_username"
                                   ng-model="view_username"
                                   class="form-control input_user"
                                   placeholder="Nombre de usuario"
                                   autocomplete="username"
                                   required
                                   ng-trim="true" />
                        </div>

                        <div class="input-group mb-2">
                            <div class="input-group-append">
                                <span class="input-group-text"><i class="fas fa-key"></i></span>
                            </div>
                            <input type="password"
                                   id="view_password"
                                   ng-model="view_password"
                                   class="form-control input_pass"
                                   placeholder="Contraseña"
                                   autocomplete="current-password"
                                   required
                                   ng-trim="true" />
                        </div>

                        <div class="form-group">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="customControlInline" />
                                <label class="custom-control-label" for="customControlInline" style="color:#000;">Recordar</label>
                            </div>
                        </div>

                        <div class="d-flex justify-content-center mt-3 login_container">
                            <button type="submit" class="btn login_btn" ng-disabled="!isFormValid()">
                                Ingresar <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

    <!-- Si us�s toasts propios -->
    <script src="js/custom-toast.js"></script>

    <!-- Tu l�gica de login (usa ng-submit y muestra errores) -->
    <script src="js/login.js"></script>
</body>
</html>
